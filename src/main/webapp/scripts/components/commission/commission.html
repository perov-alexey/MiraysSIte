<div class="commission">
    <div layout="row" class="data-row">
        <div layout="row" layout-align="start center" flex>
            <div class="status-container">
                <div ng-class="$ctrl.commission.currentStage ? 'close_commission' : 'open_commission'" class="status"></div>
            </div>
            <div flex ng-hide="$ctrl.isAuthorized" class="commission-owner">{{$ctrl.commission.owner}}</div>
            <div flex ng-show="$ctrl.isAuthorized">
                <md-input-container md-no-float>
                    <input ng-model="$ctrl.commission.owner" placeholder="Commissioner" ng-keypress="$ctrl.saveIfEnterPressed($event, $ctrl.commission)">
                </md-input-container>
            </div>
        </div>
    </div>
    <div layout="row" ng-show="$ctrl.commission.currentStage" class="currentStage-row">
        <div flex layout="row">
            <md-menu flex ng-repeat="stageName in $ctrl.stages">
                <md-button ng-class="$ctrl.commission.currentStage.stageName == '{{stageName}}' ? 'current-stage' : ''"
                           class="currentStage-container" ng-click="$mdOpenMenu($event)">{{stageName}}</md-button>
                <md-menu-content width="4">
                    <md-menu-item>
                        <md-button>
                            <input ng-change='updateStage(stageName)' class="ng-hide"
                                   type="file" data-bind-file="" id="image-picker-{{$ctrl.commission.owner}}-{{stageName}}"
                                   data-ng-model="$ctrl.commission.currentStage.image"/>
                            <label for="image-picker-{{$ctrl.commission.owner}}-{{stageName}}">
                                <md-icon>file_upload</md-icon>
                                Upload Image
                            </label>
                        </md-button>
                    </md-menu-item>
                </md-menu-content>
            </md-menu>
        </div>
    </div>
</div>

