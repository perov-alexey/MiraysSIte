<div class="commission">
    <div layout="row" class="data-row">
        <div layout="row" layout-align="start center" flex>
            <div class="status-container">
                <div ng-class="$ctrl.commission.currentStage ? 'close_commission' : 'open_commission'" class="status"></div>
            </div>
            <div flex ng-hide="$ctrl.isAuthorized" class="commission-owner">{{$ctrl.commission.owner}}</div>
            <div flex ng-show="$ctrl.isAuthorized">
                <md-input-container md-no-float>
                    <input ng-model="$ctrl.commission.owner" placeholder="Commissioner" ng-keypress="$ctrl.saveIfEnterPressed($event, $ctrl.commission)">
                </md-input-container>
            </div>
        </div>
    </div>
    <div layout="row" ng-show="$ctrl.commission.currentStage" class="currentStage-row">
        <div flex layout="row">
            <div flex>
                <div ng-class="$ctrl.commission.currentStage.stageName == 'PAYED' ? 'current-stage' : ''"
                     class="currentStage-container">PAYED</div>
            </div>
            <div flex>
                <div ng-class="$ctrl.commission.currentStage.stageName == 'SKETCH' ? 'current-stage' : ''"
                     class="currentStage-container">SKETCH</div>
            </div>
            <div flex>
                <div ng-class="$ctrl.commission.currentStage.stageName == 'COLORED' ? 'current-stage' : ''"
                     class="currentStage-container">COLORED</div>
            </div>
            <div flex>
                <div ng-class="$ctrl.commission.currentStage.stageName == 'DETAILED' ? 'current-stage' : ''"
                     class="currentStage-container">DETAILED</div>
            </div>
            <div flex>
                <div ng-class="$ctrl.commission.currentStage.stageName == 'FINISHED' ? 'current-stage' : ''"
                     class="currentStage-container">FINISHED</div>
            </div>
            <md-input-container>
                <label>Stage</label>
                <md-select name="type" ng-model="$ctrl.commission.currentStage.stageName" required>
                    <md-option value="SKETCH">Sketch</md-option>
                    <md-option ng-class="$ctrl.commission.currentStage.stageName == 'COLORED' ? 'current-stage' : ''"
                               value="COLORED">Colored</md-option>
                    <md-option ng-class="$ctrl.commission.currentStage.stageName == 'DETAILED' ? 'current-stage' : ''"
                               value="DETAILED">Detailed</md-option>
                    <md-option ng-class="$ctrl.commission.currentStage.stageName == 'FINISHED' ? 'current-stage' : ''"
                               value="FINISHED">Finished</md-option>
                </md-select>
            </md-input-container>
            <input class="ng-hide" id="image-picker-$ctrl.commission.owner" type="file"
                   data-bind-file="" data-ng-model="$ctrl.commission.currentStage.image"/>
            <label for="image-picker-$ctrl.commission.owner" class="md-button md-raised md-primary">Choose File</label>
            <md-button ng-click="$ctrl.updateStage()">Save</md-button>
        </div>
        <div ng-show="$ctrl.commission.currentStage" layout="row">
            <img src="/commission/image/{{$ctrl.commission.id}}/{{$ctrl.commission.currentStage.stageName}}">
        </div>
    </div>
</div>

